/**
 * @file M5Card_Wifi_KeyBoard_Setup.ino
 * @author Aur�lio Avanzi
 * @brief https://github.com/cyberwisk/M5Card_Wifi_KeyBoard_Setup/tree/main/M5Card_Wifi_KeyBoard_Setup
 * @version Apha 0.3
 * @date 2024-01-30
 *
 * @Hardwares: M5Cardputer - https://docs.m5stack.com/en/core/Cardputer
 * @Dependent Librarys:
 * M5Cardputer: https://github.com/m5stack/M5Cardputer
 * WiFi: https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFi
 **/

#include "M5CardWifiSetup.h"

M5CardWifiSetup wifiSetup;

void setup() {
    auto cfg = M5.config();
    M5Cardputer.begin(cfg, true);
    M5Cardputer.Display.setRotation(1);
    M5Cardputer.Display.setTextColor(GREEN, BLACK);
    M5Cardputer.Display.setTextFont(&fonts::FreeMonoOblique9pt7b);

    wifiSetup.connectToWiFi();
}

void loop() {
    delay(1000);
    M5Cardputer.update();
    if (WiFi.status() == WL_CONNECTED) {
        wifiSetup.displayWiFiInfo();
    } else {
        wifiSetup.connectToWiFi();
    }
/*
    M5Cardputer.Display.drawString("Del Para Apagar.", 1, 100);
    if (M5Cardputer.Keyboard.isChange() && M5Cardputer.Keyboard.isPressed()) {
        Keyboard_Class::KeysState status = M5Cardputer.Keyboard.keysState();
        if (status.del) {
            M5Cardputer.Speaker.tone(10000, 100);
            M5Cardputer.Display.drawString("Memoria Apagada.", 1, 70);
            Preferences preferences;
            preferences.begin("wifi_settings", false);
            preferences.clear();  // Apagar memória
            preferences.end();
            delay(1000);
            ESP.restart();
        }
    }
*/
} 
